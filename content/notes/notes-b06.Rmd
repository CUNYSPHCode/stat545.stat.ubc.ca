---
title: "Lecture Notes: Character Data"
subtitle: "Version 0.1.0.9000"
output: html_document
---


## Learning Objectives

From today's class, students are anticipated to be able to:

- Manipulate a character vector in R using the stringr package.
- Write simple regular expressions (regex).
- Apply regular expressions to data manipulation.

## Parallel Resources

This topic parallels these resources:

- STAT 545 Episode (future resource)
- Similar overview tutorials:
    - [stat545.com Chapter 11: character vectors](https://stat545.com/character-vectors.html)
    - [R4DS Chapter 14: strings](https://r4ds.had.co.nz/strings.html).

I suggest digesting this material before class, or at least throughout our discussion of the topic.

## Additional Resources

The stat545.com Chapter 11 on character vectors [has an elaborate discussion on useful resources](https://stat545.com/character-vectors.html#resources-3) for learning more about strings. 

## Quiz

Use these questions to check your understanding of the material.

**NOTE**: No canvas submission is required for Class 12-B.

1. True or False: The regular expression `[ab][ab]` will match "ab", "aa", and "bb" as possibilities, whereas `[ab]{2}` will only match "aa" or "bb".

## Demonstration

Today:

1. Work on Worksheet 3-B, "Part 1: Manipulating strings"
2. Explore regex in the demo below.
3. Continue Worksheet 3-B, "Part 2: Regex"

### Regex Demo

- Useful for identifying _patterns_, not exact character specifications.
- Hard to read and write!
- We'll focus on finding _matches_ (the hardest part). You can also use regex to manipulate strings -- but we'll delegate that to [r4ds: strings: tools](https://r4ds.had.co.nz/strings.html#tools).

#### Not re*pr*ex!

They sound the same, but are very different things:

- re*pr*ex = reproducible example.
- re*g*ex = regular expression.

reprex:

```
reprex::reprex({
    x <- 5
    x * 2
})
#> Rendering reprex...
#> Rendered reprex is on the clipboard.
```

regex:

```
"STAT 545[A|B].*"
```

#### Exploring regex with stringr

- Use `str_view_all(countries, pattern = "FILL_THIS_IN")`, where `FILL_THIS_IN` matches the solution, to view exactly what is matched for each country.
- Use `match = TRUE` to only view those entries with a match. 
- Escape using `\` to match a special character literally -- use two in R, because R does one level of escaping before "executing" the regular expression.
  - Try searching for a period in a text file using RStudio: with and without "regex" checked off.


### Character Classes

- `[letters]` matches a single character that's either l, e, t, ..., or s.
- `[^letters]`: anything _but_ these letters. 

See more at: https://r4ds.had.co.nz/strings.html#character-classes-and-alternatives

Note that not all special characters "work" within `[]`, but some do, and do not always carry the same meaning (like `^`)! From said resource, they are:

>  `$` `.` `|` `?` `*` `+` `(` `)` `[` `{`. Unfortunately, a few characters have special meaning even inside a character class and must be handled with backslash escapes: `]` `\` `^` and `-`.
