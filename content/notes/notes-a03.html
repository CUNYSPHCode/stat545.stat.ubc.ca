---
title: "Lecture Notes: Authoring and Reproducibility"
subtitle: "Version 1.0.0"
output: html_document
---

<script src="/rmarkdown-libs/header-attrs/header-attrs.js"></script>


<div id="learning-objectives" class="section level2">
<h2>Learning Objectives</h2>
<p>From today’s class, students are anticipated to be able to:</p>
<ul>
<li>Use basic markdown features.</li>
<li>Write documents in markdown on GitHub and RStudio.</li>
<li>Choose whether html or pdf is an appropriate output.</li>
<li>Style an Rmd document by editing the YAML header.</li>
<li>Demonstrate at least two Rmd code chunk options.</li>
<li>Render your finalized document to HTML &amp; PDF.</li>
</ul>
</div>
<div id="resources" class="section level2">
<h2>Resources</h2>
<p>High-level video lecture for today:</p>
<ul>
<li><a href="https://youtu.be/ZzDSkBgt9xQ">STAT 545 Episode 3-A: Reproducible Reports with R Markdown</a></li>
</ul>
<p>Some additional resources that you might find useful:</p>
<ul>
<li>The <a href="https://rmarkdown.rstudio.com/lesson-1.html">Official R Markdown Tutorial</a> from the “Introduction” up to and including the “Inline Code” section.</li>
</ul>
<p>Simple cheat sheets:</p>
<ul>
<li><a href="https://guides.github.com/pdfs/markdown-cheatsheet-online.pdf">Simple markdown cheat sheet</a></li>
<li><a href="https://bookdown.org/yihui/rmarkdown/html-document.html">YAML headers options</a></li>
</ul>
<p>Fully loaded cheat sheets:</p>
<ul>
<li><a href="https://rstudio.com/wp-content/uploads/2016/03/rmarkdown-cheatsheet-2.0.pdf">R Markdown cheat sheet</a></li>
<li><a href="https://rstudio.com/wp-content/uploads/2015/03/rmarkdown-reference.pdf?_ga=2.177968037.1059384083.1597196687-1784159993.1567907747">R Markdown reference guide</a></li>
</ul>
<p>Note that many cheat sheets can be found from RStudio: go to <code>Help</code> -&gt; <code>Cheatsheets</code>.</p>
<p>Others:</p>
<ul>
<li>Jenny Bryan’s <a href="https://happygitwithr.com/rmd-test-drive.html#rmd-troubleshooting">troubleshooting</a> for R Markdown page in Happy Git that guides you through common fixes.</li>
<li><a href="https://medium.com/@ayman/wysiwyg-is-dead-d225276ed53">WYSIWYG is dead</a>
<ul>
<li>An entertaining and concise argument against using “WYSIWYG” editors like Microsoft Word.</li>
</ul></li>
</ul>
</div>
<div id="test-your-understanding" class="section level2">
<h2>Test Your Understanding</h2>
<ol style="list-style-type: decimal">
<li>True or False: Since GitHub only displays the code behind an html file, we need to output to pdf if we want to be able to view the rendering on GitHub.</li>
<li>True or False: It doesn’t make sense to output an .Rmd file to markdown, because .Rmd is already markdown.</li>
<li>Which of these file formats are proprietary? (a) <code>.docx</code>; (b) <code>.html</code>; (c) <code>.txt</code>; (d) <code>.Rmd</code>; (e) <code>.xlsx</code></li>
</ol>
</div>
<div id="introduction-to-r-markdown-and-knitr" class="section level2">
<h2>Introduction to (R) Markdown and knitr</h2>
<p>Using an editor like MS Word (or WYSIWYG editors) is like painting: you decorate the page with text, graphs, and tables, making sure things are positioned, sized, and coloured appropriately. Using (R) markdown lets you write a “blueprint” for your analysis, which includes “instructions” on how to format the text, and can be rendered to a prettier looking document.</p>
<div id="getting-started-with-markdown" class="section level3">
<h3>Getting started with markdown</h3>
<ol style="list-style-type: decimal">
<li><p>In RStudio, go to “File” -&gt; “New File” -&gt; “Markdown File”.</p></li>
<li><p>Explore various markdown features. In other words, “instructions” as to how to render the document. For example:</p>
<ul>
<li>Headers</li>
<li>Bold, italics</li>
<li>“Code format” using backticks.</li>
<li>Lists</li>
</ul></li>
<li><p>Render the document to html. Render it to pdf. Ignore the “YAML header” that’s automatically added to the top of your file, for now. Notice that an <em>output</em> file was generated from the <em>source</em> file.</p>
<ul>
<li>Never edit the output file. It will only be overwritten when you re-render the file.</li>
</ul></li>
<li><p>Open the <code>.md</code> file using a different editor.</p>
<ul>
<li>Notice that the file does not depend on a <em>program</em> to view it – unlike MS Word, for example, where a word file can only be opened by MS Word.</li>
<li>You may notice different colours showing up in the text, depending on which program we’re using. This is called <em>syntax highlighting</em>, and it’s a program’s way of helping you write plain text without it all blurring together. But, ultimately, it’s still just plain text that can’t be bolded, increased in size, etc. – such features do not come with plain text.</li>
</ul></li>
</ol>
</div>
<div id="getting-started-with-r-markdown" class="section level3">
<h3>Getting started with R Markdown</h3>
<ol style="list-style-type: decimal">
<li><p>Open a new .Rmd file in RStudio.</p></li>
<li><p>To get started with using R Markdown, you’ll need to install the <strong>rmarkdown</strong> R package. You might automatically be prompted to do this; accept, if so. If not, you will have to manually install the package. Also, the activity we have also depends on the <strong>DT</strong> package:</p>
<pre><code>install.packages(&#39;rmarkdown&#39;)
install.packages(&#39;DT&#39;)</code></pre></li>
<li><p>Click “knit”.</p>
<ul>
<li>Notice that R code is executed in <em>chunks</em>, and the output is displayed in the output file.</li>
</ul></li>
</ol>
</div>
<div id="exploring-the-yaml-header" class="section level3">
<h3>Exploring the YAML header</h3>
<p><em>(<strong>Got lost in the demonstration?</strong> No problem, just open a new <code>.Rmd</code> file in RStudio via “File” -&gt; “New File” -&gt; “R Markdown…”, and just press “OK”, and resume!)</em></p>
<ol style="list-style-type: decimal">
<li><p>Go to the top of the .Rmd document, and explore the <em>YAML header</em>.</p>
<ul>
<li>The YAML header is contained between two <code>---</code>, and contains metadata on the document.</li>
</ul></li>
<li><p>Add some other data to the YAML header. Explore the options in <a href="https://bookdown.org/yihui/rmarkdown/html-document.html">Yihui Xie’s RMarkdown book</a>. Some options to consider:</p>
<ul>
<li>Keep the “md” intermediate file with <code>keep_md: true</code></li>
<li>Add a theme. My favorite is cerulean: <code>theme: cerulean</code></li>
<li>Add a table of contents with <code>toc: true</code></li>
<li>Make the toc float: <code>toc_float: true</code></li>
</ul></li>
<li><p>Knit the document to see how the file changes.</p></li>
<li><p>Try knitting to different outputs. This is a tremendously useful feature of Rmd! (and plain text in general).</p></li>
</ol>
</div>
<div id="exploring-code-chunks" class="section level3">
<h3>Exploring code chunks</h3>
<p><em>(<strong>Got lost in the demonstration?</strong> No problem, just open a new <code>.Rmd</code> file in RStudio via “File” -&gt; “New File” -&gt; “R Markdown…”, and just press “OK”, and resume!)</em></p>
<ol style="list-style-type: decimal">
<li><p>Add a code chunk at the bottom of the <code>.Rmd</code> file. Either select “Insert” -&gt; “R”, or use a keyboard shortcut: <code>cmd + option + I</code> (MAC) / <code>ctrl + alt + i</code> (WINDOWS).</p></li>
<li><p>Print out the <code>mtcars</code> data frame to explore the output. (Yes, this object comes shipped with R.)</p></li>
<li><p>Try out the <code>DT::datatable()</code> function on <code>mtcars</code>, and knit the file (to html, ideally).</p></li>
<li><p>Continue the markdown commentary! If you were to give this document to someone to read through your “analysis”, a few notes would make it more readable.</p></li>
<li><p>Add an <a href="https://rmarkdown.rstudio.com/lesson-4.html">in-line code chunk</a> specifying the number of rows of the mtcars dataset. Hint: <code>nrow()</code>.</p></li>
</ol>
</div>
<div id="last-touches-exploring-chunk-options" class="section level3">
<h3>Last touches! Exploring chunk options</h3>
<p><em>(<strong>Got lost in the demonstration?</strong> No problem, just open a new <code>.Rmd</code> file in RStudio via “File” -&gt; “New File” -&gt; “R Markdown…”, and just press “OK”, and resume!)</em></p>
<p>Just like YAML is metadata for the Rmd document, <em>code chunk options</em> are metadata for the code chunk. Specify them within the <code>{r}</code> at the top of a code chunk, separated by commas. For a list of chunk options, check out <a href="https://yihui.org/knitr/options/">Yihui Xie’s knitr book</a>. Let’s try some:</p>
<ol style="list-style-type: decimal">
<li><p>In any of the code chunks that you have created above, hide the code from the output with <code>echo = FALSE</code>. It would look like this <code>{r echo = FALSE}</code>.</p></li>
<li><p>Change the figure width and height with <code>fig.width = 5</code> and <code>fig.height = 3</code>.</p></li>
<li><p>Knit the results. Can you spot the differences?</p></li>
</ol>
</div>
</div>
<div id="work-on-collaborative-project" class="section level2">
<h2>Work on Collaborative Project</h2>
<p>Agenda:</p>
<ol style="list-style-type: decimal">
<li><p>Getting setup with a GitHub Personal Access Token (PAT) (so that you can sync GitHub with files on your computer):</p>
<ol style="list-style-type: decimal">
<li>Create a PAT: follow the instructions on [GitHub’s tutorial]. <strong>Be sure to copy your token!</strong></li>
<li>In an R console, execute <code>credentials::set_github_pat()</code> (you may have to install the credentials package by first running <code>install.packages("credentials")</code>). Enter your PAT that you just made. That should be it!</li>
</ol></li>
<li><p>Overview of collaborative project.</p></li>
<li><p>Demonstrate making the group repository.</p></li>
<li><p>Work period: contact your group and set up your repository. (~10 minutes).</p>
<ol style="list-style-type: decimal">
<li>Find your group number, and contact your teammates through Slack (start a thread amongst the 3-4 of you, ideally). Please do not physically move around the classroom, but you may feel comfortable talking with those beside you, if you’re present in-person.</li>
<li>Choose someone to make the team’s repository, and to invite the others as collaborators to the repository.</li>
<li>If time remains, work on “Exercise 5: Teamwork Contract” with your teammates, or work by yourself on “Exercise 4: GitHub Issues”.</li>
</ol></li>
<li><p>Create a branch (together)</p>
<ol style="list-style-type: decimal">
<li>Make sure your project is open in RStudio (you may have to clone it. Remember: “File” -&gt; “New Project” -&gt; “Version Control”.)</li>
<li>Under the “Git” tab, click the “New Branch” button. Give the branch a name. When prompted, say yes to syncing the branch with GitHub (the “remote”).</li>
</ol></li>
<li><p>Make changes, and merge the branch via a pull request. (My turn)</p>
<ol style="list-style-type: decimal">
<li>I’ll make changes to the project files, commit them, and push them.</li>
<li>I’ll explore the remote repository (i.e., GitHub), to show you the changes made on the branch.</li>
<li>I’ll initialize a pull request (on GitHub), and will merge it.</li>
</ol></li>
</ol>
</div>
<div id="attribution" class="section level2">
<h2>Attribution</h2>
<p>Thanks to Icíar Fernández Boyano’s help in putting this demonstration together.</p>
</div>
