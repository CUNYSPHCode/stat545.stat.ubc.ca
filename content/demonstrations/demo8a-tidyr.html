---
title: "Demonstration 8-A: tidyr for tidy data"
output: html_document
---



<pre class="r"><code>library(tidyverse)
library(palmerpenguins)
library(gapminder)
knitr::opts_chunk$set(error = TRUE)
guestlist &lt;- read_csv(here::here(&quot;content&quot;, &quot;data&quot;, &quot;wedding&quot;, &quot;attend.csv&quot;))</code></pre>
<div id="review" class="section level2">
<h2>Review</h2>
<div id="collaborative-milestone-2" class="section level3">
<h3>Collaborative Milestone 2</h3>
<p>Logical operators: <code>%in%</code>, <code>!=</code>, <code>!</code></p>
<pre class="r"><code>v &lt;- c(&quot;foo&quot;, &quot;baz&quot;, &quot;foo&quot;, &quot;bar&quot;)</code></pre>
<ul>
<li>Avoid using deprecated functions: use <code>across()</code> instead of scoped variants like <code>mutate_at()</code> and <code>summarise_if()</code>.</li>
<li>Troubleshooting? Check the function’s documentation.
<ul>
<li>Easy to access with <code>?function</code></li>
<li>Typically concise. Not like those old fashioned “User Manuals” <a href="https://www.mrc-bsu.cam.ac.uk/wp-content/uploads/manual14.pdf">like this WinBUGS manual</a>.</li>
</ul></li>
</ul>
</div>
<div id="worksheet-3-a" class="section level3">
<h3>Worksheet 3-A</h3>
<p>Any requests? If not, Question 1.3:</p>
<blockquote>
<p>In a single expression, make a tibble with the following columns for each island in the penguins data set:</p>
<ul>
<li>What is the mean of each numeric variable in the penguins dataset in each island? Keep the column names the same.</li>
<li>How many penguins are there in each island? Add this to a column named <code>n</code>.</li>
</ul>
</blockquote>
</div>
</div>
<div id="tidyr-demo" class="section level2">
<h2>tidyr Demo</h2>
<p>Let’s work with this guestlist dataset.</p>
<pre class="r"><code>guestlist</code></pre>
<pre><code>## # A tibble: 30 x 7
##    party name  meal_wedding meal_brunch attendance_wedd… attendance_brun…
##    &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;        &lt;chr&gt;       &lt;chr&gt;            &lt;chr&gt;           
##  1     1 Somm… PENDING      PENDING     PENDING          PENDING         
##  2     1 Phil… vegetarian   Menu C      CONFIRMED        CONFIRMED       
##  3     1 Blan… chicken      Menu A      CONFIRMED        CONFIRMED       
##  4     1 Emaa… PENDING      PENDING     PENDING          PENDING         
##  5     2 Blai… chicken      Menu C      CONFIRMED        CONFIRMED       
##  6     2 Nige… &lt;NA&gt;         &lt;NA&gt;        CANCELLED        CANCELLED       
##  7     3 Sine… PENDING      PENDING     PENDING          PENDING         
##  8     4 Ayra… vegetarian   Menu B      PENDING          PENDING         
##  9     5 Atla… PENDING      PENDING     PENDING          PENDING         
## 10     5 Denz… fish         Menu B      CONFIRMED        CONFIRMED       
## # … with 20 more rows, and 1 more variable: attendance_golf &lt;chr&gt;</code></pre>
<div id="country-relationship" class="section level3">
<h3>1. Country relationship</h3>
<p>Using the <code>gapminder</code> dataset: What’s the relationship between Canada’s GDP per capita and the United Kingdom’s? First, identify the tidy format.</p>
<pre class="r"><code>gapminder %&gt;% 
  FILL_THIS_IN</code></pre>
<pre><code>## Error in FILL_THIS_IN(.): could not find function &quot;FILL_THIS_IN&quot;</code></pre>
</div>
<div id="whos-pending" class="section level3">
<h3>2. Who’s PENDING?</h3>
<p>Our task: extract all “PENDING” entries, paired with who it is, and what information is pending.</p>
<p>What is a tidy data format for this question? Do the tidying.</p>
<pre class="r"><code>guestlist %&gt;% 
  FILL_THIS_IN</code></pre>
<pre><code>## Error in FILL_THIS_IN(.): could not find function &quot;FILL_THIS_IN&quot;</code></pre>
</div>
<div id="quiz" class="section level3">
<h3>Quiz</h3>
<ol style="list-style-type: decimal">
<li>True or False: it’s possible to lengthen a tibble “all the way” so that it can’t be lengthened anymore.</li>
<li>True or False: To make a scatterplot viewing the relationship of Africa’s GDP per capita vs. Europe’s, use <code>pivot_wider()</code>.</li>
</ol>
</div>
<div id="relationship-between-pending" class="section level3">
<h3>3. Relationship between PENDING</h3>
<p>What’s the relationship between whether or not a meal is PENDING, and the attendance status? First determine what a tidy format is for this question, then answer the question.</p>
<pre class="r"><code>guestlist %&gt;% 
  FILL_THIS_IN</code></pre>
<pre><code>## Error in FILL_THIS_IN(.): could not find function &quot;FILL_THIS_IN&quot;</code></pre>
</div>
<div id="split-name" class="section level3">
<h3>4. Split name</h3>
<p>Split the guest name into first and last name.</p>
<pre class="r"><code>guestlist %&gt;% 
  FILL_THIS_IN</code></pre>
<pre><code>## Error in FILL_THIS_IN(.): could not find function &quot;FILL_THIS_IN&quot;</code></pre>
</div>
</div>
<div id="deprecated-functions-spread-and-gather" class="section level2">
<h2>Deprecated functions: spread and gather</h2>
<p>Pivoting used to be achieved through the tidyr <code>spread()</code> and <code>gather()</code> functions. These are deprecated and should not be used.</p>
</div>
