---
title: "Team Troubleshooting Deliverable 2"
output: html_document
---



<pre class="r"><code>knitr::opts_chunk$set(error = TRUE)</code></pre>
<div id="attributions" class="section level2">
<h2>Attributions</h2>
<p>Icíar Fernández-Boyano</p>
</div>
<div id="instructions" class="section level2">
<h2>Instructions</h2>
<p>There are <strong>30 errors</strong> in this Rmd. Will you find them all?</p>
<ul>
<li><em>20 errors are marked</em> (at least the general area in which they are located) by ## ERROR HERE ## in the code chunk.</li>
<li><em>10 errors are hiding.</em> Hint: You should be able to knit the script if all code is working correctly…</li>
</ul>
<p><strong>Notes:</strong></p>
<ul>
<li><p>Errors may be in the form of <strong>broken code</strong> (e.g. using " " inappropriately, which returns an error when running the code), but can also be <strong>running code that does not follow the instructions</strong> (e.g. the goal of the code was to filter the first 3 rows, but instead, the first 3 columns were selected). Read the Rmd commentary carefully to find these.</p></li>
<li><p>A code chunk with multiple errors, whether broken code or wrongly followed instructions, <strong>counts as a single error for the purpose of grading</strong>. An example:</p></li>
</ul>
<p>Exercise A: In the following chunk, I would like to select all columns of the mtcars dataset from <code>disp</code> to <code>wt</code> (inclusive), and then, filter for those with horsepower (<code>hp</code>) of at least 100 or greater.</p>
<pre class="r"><code>### ERROR HERE ###
mtcars %&gt;%
  select(disp:vs) %&gt;%
  filter(hp &gt;= 100)</code></pre>
<pre><code>##                      disp  hp drat    wt  qsec vs
## Mazda RX4           160.0 110 3.90 2.620 16.46  0
## Mazda RX4 Wag       160.0 110 3.90 2.875 17.02  0
## Hornet 4 Drive      258.0 110 3.08 3.215 19.44  1
## Hornet Sportabout   360.0 175 3.15 3.440 17.02  0
## Valiant             225.0 105 2.76 3.460 20.22  1
## Duster 360          360.0 245 3.21 3.570 15.84  0
## Merc 280            167.6 123 3.92 3.440 18.30  1
## Merc 280C           167.6 123 3.92 3.440 18.90  1
## Merc 450SE          275.8 180 3.07 4.070 17.40  0
## Merc 450SL          275.8 180 3.07 3.730 17.60  0
## Merc 450SLC         275.8 180 3.07 3.780 18.00  0
## Cadillac Fleetwood  472.0 205 2.93 5.250 17.98  0
## Lincoln Continental 460.0 215 3.00 5.424 17.82  0
## Chrysler Imperial   440.0 230 3.23 5.345 17.42  0
## Dodge Challenger    318.0 150 2.76 3.520 16.87  0
## AMC Javelin         304.0 150 3.15 3.435 17.30  0
## Camaro Z28          350.0 245 3.73 3.840 15.41  0
## Pontiac Firebird    400.0 175 3.08 3.845 17.05  0
## Lotus Europa         95.1 113 3.77 1.513 16.90  1
## Ford Pantera L      351.0 264 4.22 3.170 14.50  0
## Ferrari Dino        145.0 175 3.62 2.770 15.50  0
## Maserati Bora       301.0 335 3.54 3.570 14.60  0
## Volvo 142E          121.0 109 4.11 2.780 18.60  1</code></pre>
<p>Notice that the instructions indicate selecting columns <code>disp</code> to <code>wt</code>, and the code reads <code>select(disp:vs)</code>. There is the error.</p>
<p>Exercise B: <em>Same instructions as exercise A</em>. In the following chunk, I would like to select all columns of the mtcars dataset from <code>disp</code> to <code>wt</code> (inclusive), and then, filter for those with horsepower (<code>hp</code>) of at least 100 or greater.</p>
<pre class="r"><code>### ERROR HERE ###
mtcars %&gt;%
  select(disp:vs) %&gt;%
  filter(hp &gt;= &quot;100&quot;)</code></pre>
<pre><code>##                      disp  hp drat    wt  qsec vs
## Mazda RX4           160.0 110 3.90 2.620 16.46  0
## Mazda RX4 Wag       160.0 110 3.90 2.875 17.02  0
## Datsun 710          108.0  93 3.85 2.320 18.61  1
## Hornet 4 Drive      258.0 110 3.08 3.215 19.44  1
## Hornet Sportabout   360.0 175 3.15 3.440 17.02  0
## Valiant             225.0 105 2.76 3.460 20.22  1
## Duster 360          360.0 245 3.21 3.570 15.84  0
## Merc 240D           146.7  62 3.69 3.190 20.00  1
## Merc 230            140.8  95 3.92 3.150 22.90  1
## Merc 280            167.6 123 3.92 3.440 18.30  1
## Merc 280C           167.6 123 3.92 3.440 18.90  1
## Merc 450SE          275.8 180 3.07 4.070 17.40  0
## Merc 450SL          275.8 180 3.07 3.730 17.60  0
## Merc 450SLC         275.8 180 3.07 3.780 18.00  0
## Cadillac Fleetwood  472.0 205 2.93 5.250 17.98  0
## Lincoln Continental 460.0 215 3.00 5.424 17.82  0
## Chrysler Imperial   440.0 230 3.23 5.345 17.42  0
## Fiat 128             78.7  66 4.08 2.200 19.47  1
## Honda Civic          75.7  52 4.93 1.615 18.52  1
## Toyota Corolla       71.1  65 4.22 1.835 19.90  1
## Toyota Corona       120.1  97 3.70 2.465 20.01  1
## Dodge Challenger    318.0 150 2.76 3.520 16.87  0
## AMC Javelin         304.0 150 3.15 3.435 17.30  0
## Camaro Z28          350.0 245 3.73 3.840 15.41  0
## Pontiac Firebird    400.0 175 3.08 3.845 17.05  0
## Fiat X1-9            79.0  66 4.08 1.935 18.90  1
## Porsche 914-2       120.3  91 4.43 2.140 16.70  0
## Lotus Europa         95.1 113 3.77 1.513 16.90  1
## Ford Pantera L      351.0 264 4.22 3.170 14.50  0
## Ferrari Dino        145.0 175 3.62 2.770 15.50  0
## Maserati Bora       301.0 335 3.54 3.570 14.60  0
## Volvo 142E          121.0 109 4.11 2.780 18.60  1</code></pre>
<p>In addition to selecting the wrong columns, option B encapsulates the number 100 in between quotes - this is incorrect R syntax. In fact, if you run the code you will see that the filtering is not working.</p>
<p><strong>Both Exercise A and Exercise B would count as a <em>single error</em>.</strong> Although exercise A requires a single correction and exercise B requires two, these are in <em>the same code chunk</em>, therefore, it counts as a <strong>single error</strong> for the purpose of grading.</p>
<p>Solution:</p>
<pre class="r"><code>mtcars %&gt;%
  select(disp:wt) %&gt;%
  filter(hp &gt;= 100)</code></pre>
<pre><code>##                      disp  hp drat    wt
## Mazda RX4           160.0 110 3.90 2.620
## Mazda RX4 Wag       160.0 110 3.90 2.875
## Hornet 4 Drive      258.0 110 3.08 3.215
## Hornet Sportabout   360.0 175 3.15 3.440
## Valiant             225.0 105 2.76 3.460
## Duster 360          360.0 245 3.21 3.570
## Merc 280            167.6 123 3.92 3.440
## Merc 280C           167.6 123 3.92 3.440
## Merc 450SE          275.8 180 3.07 4.070
## Merc 450SL          275.8 180 3.07 3.730
## Merc 450SLC         275.8 180 3.07 3.780
## Cadillac Fleetwood  472.0 205 2.93 5.250
## Lincoln Continental 460.0 215 3.00 5.424
## Chrysler Imperial   440.0 230 3.23 5.345
## Dodge Challenger    318.0 150 2.76 3.520
## AMC Javelin         304.0 150 3.15 3.435
## Camaro Z28          350.0 245 3.73 3.840
## Pontiac Firebird    400.0 175 3.08 3.845
## Lotus Europa         95.1 113 3.77 1.513
## Ford Pantera L      351.0 264 4.22 3.170
## Ferrari Dino        145.0 175 3.62 2.770
## Maserati Bora       301.0 335 3.54 3.570
## Volvo 142E          121.0 109 4.11 2.780</code></pre>
</div>
<div id="troubleshooting-time" class="section level2">
<h2>Troubleshooting time!</h2>
<p>There are 30 errors in this Rmd. Will you be the one to find them all? More than 1 error in a single chunk of code counts as a <strong>single</strong> error.</p>
<pre class="r"><code>### SOLUTION HERE ###
library(dslabs)
library(singer)
library(tidyverse)
library(stringr)</code></pre>
<p><a href="https://dl.acm.org/doi/10.1145/2827872">MovieLens</a> are a series of datasets widely used in education, that describe movie ratings from the MovieLens <a href="https://movielens.org/">website</a>. There are several MovieLens datasets, collected by the <a href="https://grouplens.org/datasets/movielens/">GroupLens Research Project</a> at the University of Minnesota. Here, we load the MovieLens 100K dataset from Rafael Irizarry and Amy Gill’s R package, <a href="https://cran.r-project.org/web/packages/dslabs/dslabs.pdf">DSLabs</a>, which contains datasets useful for data analysis practice, homework, and projects in data science courses and workshops.</p>
<div id="exercise-1" class="section level3">
<h3>Exercise 1</h3>
<p>Let’s have a look at the dataset! My goal is to:</p>
<ul>
<li>Find out the “class” of the dataset.</li>
<li>If it isn’t a tibble already, coerce it into a tibble and store it in the variable “movieLens”.</li>
<li>Have a quick look at the rows and columns, using a <em>dplyr function</em>.</li>
</ul>
<pre class="r"><code>class(dslabs::movielens)</code></pre>
<pre><code>## [1] &quot;data.frame&quot;</code></pre>
<pre class="r"><code>movieLens &lt;- as_tibble(dslabs::movielens)
glimpse(movieLens) ### SOLUTION HERE ###</code></pre>
<pre><code>## Rows: 100,004
## Columns: 7
## $ movieId   &lt;int&gt; 31, 1029, 1061, 1129, 1172, 1263, 1287, 1293, 1339, 1343, 1…
## $ title     &lt;chr&gt; &quot;Dangerous Minds&quot;, &quot;Dumbo&quot;, &quot;Sleepers&quot;, &quot;Escape from New Yo…
## $ year      &lt;int&gt; 1995, 1941, 1996, 1981, 1989, 1978, 1959, 1982, 1992, 1991,…
## $ genres    &lt;fct&gt; Drama, Animation|Children|Drama|Musical, Thriller, Action|A…
## $ userId    &lt;int&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,…
## $ rating    &lt;dbl&gt; 2.5, 3.0, 3.0, 2.0, 4.0, 2.0, 2.0, 2.0, 3.5, 2.0, 2.5, 1.0,…
## $ timestamp &lt;int&gt; 1260759144, 1260759179, 1260759182, 1260759185, 1260759205,…</code></pre>
</div>
<div id="exercise-2" class="section level3">
<h3>Exercise 2</h3>
<p>Now that we’ve had a quick look at the dataset, it would be interesting to explore the rows (observations) in some more detail. I’d like to know how many movie entries…</p>
<ul>
<li>Belong to the genre <em>“Drama”</em>?</li>
<li>Don’t belong to the genre <em>“Drama”</em>?</li>
<li>Were filmed <em>after</em> the year 2000?</li>
<li>Have a rating of <em>4.5 or greater</em>?</li>
<li>Were filmed in 1999 <em>or</em> 2000?</li>
<li>Correspond to the movie <em>“Little Women”</em>?</li>
<li>Have <em>more than</em> 4.5 stars, and were released <em>before</em> 1995?</li>
</ul>
<pre class="r"><code>filter(movieLens, genres == &quot;Drama&quot;)</code></pre>
<pre><code>## # A tibble: 7,757 x 7
##    movieId title                             year genres userId rating timestamp
##      &lt;int&gt; &lt;chr&gt;                            &lt;int&gt; &lt;fct&gt;   &lt;int&gt;  &lt;dbl&gt;     &lt;int&gt;
##  1      31 Dangerous Minds                   1995 Drama       1    2.5    1.26e9
##  2    1172 Cinema Paradiso (Nuovo cinema P…  1989 Drama       1    4      1.26e9
##  3    1293 Gandhi                            1982 Drama       1    2      1.26e9
##  4      62 Mr. Holland&#39;s Opus                1995 Drama       2    3      8.35e8
##  5     261 Little Women                      1994 Drama       2    4      8.35e8
##  6     300 Quiz Show                         1994 Drama       2    3      8.35e8
##  7     508 Philadelphia                      1993 Drama       2    4      8.35e8
##  8     537 Sirens                            1994 Drama       2    4      8.35e8
##  9    2702 Summer of Sam                     1999 Drama       3    3.5    1.30e9
## 10    3949 Requiem for a Dream               2000 Drama       3    5      1.30e9
## # … with 7,747 more rows</code></pre>
<pre class="r"><code>filter(movieLens, !genres == &quot;Drama&quot;)</code></pre>
<pre><code>## # A tibble: 92,247 x 7
##    movieId title                year genres              userId rating timestamp
##      &lt;int&gt; &lt;chr&gt;               &lt;int&gt; &lt;fct&gt;                &lt;int&gt;  &lt;dbl&gt;     &lt;int&gt;
##  1    1029 Dumbo                1941 Animation|Children…      1    3      1.26e9
##  2    1061 Sleepers             1996 Thriller                 1    3      1.26e9
##  3    1129 Escape from New Yo…  1981 Action|Adventure|S…      1    2      1.26e9
##  4    1263 Deer Hunter, The     1978 Drama|War                1    2      1.26e9
##  5    1287 Ben-Hur              1959 Action|Adventure|D…      1    2      1.26e9
##  6    1339 Dracula (Bram Stok…  1992 Fantasy|Horror|Rom…      1    3.5    1.26e9
##  7    1343 Cape Fear            1991 Thriller                 1    2      1.26e9
##  8    1371 Star Trek: The Mot…  1979 Adventure|Sci-Fi         1    2.5    1.26e9
##  9    1405 Beavis and Butt-He…  1996 Adventure|Animatio…      1    1      1.26e9
## 10    1953 French Connection,…  1971 Action|Crime|Thril…      1    4      1.26e9
## # … with 92,237 more rows</code></pre>
<pre class="r"><code>filter(movieLens, year &gt; 2000) ### SOLUTION HERE ###</code></pre>
<pre><code>## # A tibble: 25,481 x 7
##    movieId title                  year genres            userId rating timestamp
##      &lt;int&gt; &lt;chr&gt;                 &lt;int&gt; &lt;fct&gt;              &lt;int&gt;  &lt;dbl&gt;     &lt;int&gt;
##  1    5349 Spider-Man             2002 Action|Adventure…      3    3      1.30e9
##  2    5669 Bowling for Columbine  2002 Documentary            3    3.5    1.30e9
##  3    6377 Finding Nemo           2003 Adventure|Animat…      3    3      1.30e9
##  4    7153 Lord of the Rings: T…  2003 Action|Adventure…      3    2.5    1.30e9
##  5    7361 Eternal Sunshine of …  2004 Drama|Romance|Sc…      3    3      1.30e9
##  6    8622 Fahrenheit 9/11        2004 Documentary            3    3.5    1.30e9
##  7    8636 Spider-Man 2           2004 Action|Adventure…      3    3      1.30e9
##  8   44191 V for Vendetta         2006 Action|Sci-Fi|Th…      3    3.5    1.30e9
##  9   48783 Flags of Our Fathers   2006 Drama|War              3    4.5    1.30e9
## 10   50068 Letters from Iwo Jima  2006 Drama|War              3    4.5    1.30e9
## # … with 25,471 more rows</code></pre>
<pre class="r"><code>filter(movieLens, rating &gt;= 4.5) ### SOLUTION HERE ###</code></pre>
<pre><code>## # A tibble: 22,818 x 7
##    movieId title                   year genres           userId rating timestamp
##      &lt;int&gt; &lt;chr&gt;                  &lt;int&gt; &lt;fct&gt;             &lt;int&gt;  &lt;dbl&gt;     &lt;int&gt;
##  1      17 Sense and Sensibility   1995 Drama|Romance         2      5 835355681
##  2      39 Clueless                1995 Comedy|Romance        2      5 835355604
##  3     150 Apollo 13               1995 Adventure|Drama…      2      5 835355395
##  4     222 Circle of Friends       1995 Drama|Romance         2      5 835355840
##  5     265 Like Water for Chocol…  1992 Drama|Fantasy|R…      2      5 835355697
##  6     266 Legends of the Fall     1994 Drama|Romance|W…      2      5 835355586
##  7     551 Nightmare Before Chri…  1993 Animation|Child…      2      5 835355767
##  8     585 Brady Bunch Movie, The  1995 Comedy                2      5 835355817
##  9     589 Terminator 2: Judgmen…  1991 Action|Sci-Fi         2      5 835355697
## 10     590 Dances with Wolves      1990 Adventure|Drama…      2      5 835355395
## # … with 22,808 more rows</code></pre>
<pre class="r"><code>filter(movieLens, year == 1999 | month == 2000)</code></pre>
<pre><code>## Error: Problem with `filter()` input `..1`.
## x object &#39;month&#39; not found
## ℹ Input `..1` is `year == 1999 | month == 2000`.</code></pre>
<pre class="r"><code>filter(movieLens, title == &quot;Little Women&quot;) ### SOLUTION HERE ###</code></pre>
<pre><code>## # A tibble: 54 x 7
##    movieId title         year genres userId rating  timestamp
##      &lt;int&gt; &lt;chr&gt;        &lt;int&gt; &lt;fct&gt;   &lt;int&gt;  &lt;dbl&gt;      &lt;int&gt;
##  1     261 Little Women  1994 Drama       2    4    835355681
##  2     261 Little Women  1994 Drama      19    4    855194216
##  3     261 Little Women  1994 Drama      30    4    951008613
##  4     261 Little Women  1994 Drama      32    4    834828302
##  5     261 Little Women  1994 Drama      36    4    847057120
##  6     261 Little Women  1994 Drama      85    1    837513012
##  7     261 Little Women  1994 Drama      86    3    848161454
##  8     261 Little Women  1994 Drama      88    3.5 1239755456
##  9     261 Little Women  1994 Drama      95    5   1016317793
## 10     261 Little Women  1994 Drama     102    3    957894400
## # … with 44 more rows</code></pre>
<pre class="r"><code>filter(movieLens, rating &gt; 4.5, year &lt; 1995) </code></pre>
<pre><code>## # A tibble: 8,386 x 7
##    movieId title                  year genres            userId rating timestamp
##      &lt;int&gt; &lt;chr&gt;                 &lt;int&gt; &lt;fct&gt;              &lt;int&gt;  &lt;dbl&gt;     &lt;int&gt;
##  1     265 Like Water for Choco…  1992 Drama|Fantasy|Ro…      2      5    8.35e8
##  2     266 Legends of the Fall    1994 Drama|Romance|Wa…      2      5    8.35e8
##  3     551 Nightmare Before Chr…  1993 Animation|Childr…      2      5    8.35e8
##  4     589 Terminator 2: Judgme…  1991 Action|Sci-Fi          2      5    8.35e8
##  5     590 Dances with Wolves     1990 Adventure|Drama|…      2      5    8.35e8
##  6     592 Batman                 1989 Action|Crime|Thr…      2      5    8.35e8
##  7     318 Shawshank Redemption…  1994 Crime|Drama            3      5    1.30e9
##  8     356 Forrest Gump           1994 Comedy|Drama|Rom…      3      5    1.30e9
##  9    1197 Princess Bride, The    1987 Action|Adventure…      3      5    1.30e9
## 10     260 Star Wars: Episode I…  1977 Action|Adventure…      4      5    9.50e8
## # … with 8,376 more rows</code></pre>
</div>
<div id="exercise-3" class="section level3">
<h3>Exercise 3</h3>
<p>While filtering for <em>all movies that do not belong to the genre drama</em> above, I noticed something interesting. I want to filter for the same thing again, this time selecting variables <strong>title and genres first,</strong> and then <em>everything else</em>. Hint: there is a function to select “everything else”…</p>
<pre class="r"><code>movieLens %&gt;%
  filter(!genres == &quot;Drama&quot;) %&gt;%
  select(title, genres, everything()) ### SOLUTION HERE ###</code></pre>
<pre><code>## # A tibble: 92,247 x 7
##    title               genres              movieId  year userId rating timestamp
##    &lt;chr&gt;               &lt;fct&gt;                 &lt;int&gt; &lt;int&gt;  &lt;int&gt;  &lt;dbl&gt;     &lt;int&gt;
##  1 Dumbo               Animation|Children…    1029  1941      1    3      1.26e9
##  2 Sleepers            Thriller               1061  1996      1    3      1.26e9
##  3 Escape from New Yo… Action|Adventure|S…    1129  1981      1    2      1.26e9
##  4 Deer Hunter, The    Drama|War              1263  1978      1    2      1.26e9
##  5 Ben-Hur             Action|Adventure|D…    1287  1959      1    2      1.26e9
##  6 Dracula (Bram Stok… Fantasy|Horror|Rom…    1339  1992      1    3.5    1.26e9
##  7 Cape Fear           Thriller               1343  1991      1    2      1.26e9
##  8 Star Trek: The Mot… Adventure|Sci-Fi       1371  1979      1    2.5    1.26e9
##  9 Beavis and Butt-He… Adventure|Animatio…    1405  1996      1    1      1.26e9
## 10 French Connection,… Action|Crime|Thril…    1953  1971      1    4      1.26e9
## # … with 92,237 more rows</code></pre>
<p>Notice that some movies appear to have several genres, instead of a single one. If we filter for the movie “Dumbo” and select the genres column, we see that “Animation|Children|Drama|Musical” appear as genres.</p>
<pre class="r"><code>movieLens %&gt;%
  filter(title == &quot;Dumbo&quot;) %&gt;% ### SOLUTION HERE ###
  select(genres)</code></pre>
<pre><code>## # A tibble: 42 x 1
##    genres                          
##    &lt;fct&gt;                           
##  1 Animation|Children|Drama|Musical
##  2 Animation|Children|Drama|Musical
##  3 Animation|Children|Drama|Musical
##  4 Animation|Children|Drama|Musical
##  5 Animation|Children|Drama|Musical
##  6 Animation|Children|Drama|Musical
##  7 Animation|Children|Drama|Musical
##  8 Animation|Children|Drama|Musical
##  9 Animation|Children|Drama|Musical
## 10 Animation|Children|Drama|Musical
## # … with 32 more rows</code></pre>
<p>This means that when we filter for “Drama”, we are only filtering for those movies that are classified as <em>exclusively</em> Drama. What if we want to see all movies that <em>contain</em> “Drama” in their genres, even if they are a Romance-Drama, or a Comedy-Drama? Here is a handy, <strong>error-free</strong> expression that can help you do that. No errors, only for learning.</p>
<pre class="r"><code>movieLens %&gt;%
  filter(str_detect(genres, &quot;Drama&quot;))</code></pre>
<pre><code>## # A tibble: 44,752 x 7
##    movieId title                  year genres            userId rating timestamp
##      &lt;int&gt; &lt;chr&gt;                 &lt;int&gt; &lt;fct&gt;              &lt;int&gt;  &lt;dbl&gt;     &lt;int&gt;
##  1      31 Dangerous Minds        1995 Drama                  1    2.5    1.26e9
##  2    1029 Dumbo                  1941 Animation|Childr…      1    3      1.26e9
##  3    1172 Cinema Paradiso (Nuo…  1989 Drama                  1    4      1.26e9
##  4    1263 Deer Hunter, The       1978 Drama|War              1    2      1.26e9
##  5    1287 Ben-Hur                1959 Action|Adventure…      1    2      1.26e9
##  6    1293 Gandhi                 1982 Drama                  1    2      1.26e9
##  7    2455 Fly, The               1986 Drama|Horror|Sci…      1    2.5    1.26e9
##  8      17 Sense and Sensibility  1995 Drama|Romance          2    5      8.35e8
##  9      52 Mighty Aphrodite       1995 Comedy|Drama|Rom…      2    3      8.35e8
## 10      62 Mr. Holland&#39;s Opus     1995 Drama                  2    3      8.35e8
## # … with 44,742 more rows</code></pre>
<p>Now that you know that, select (and filter, where required!):</p>
<ul>
<li>All colums <em>except</em> those from userId to timestamp (inclusive)</li>
<li>Columns year, title, and genres (in that order) <em>only</em> for movies classified <em>exclusively</em> as “Romance”</li>
<li>Columns rating, title, and year (in that order) followed by everything else (all other columns), only for movies <em>containing</em> the genre “Comedy”</li>
</ul>
<pre class="r"><code>select(movieLens, -(userId:timestamp))</code></pre>
<pre><code>## # A tibble: 100,004 x 4
##    movieId title                               year genres                      
##      &lt;int&gt; &lt;chr&gt;                              &lt;int&gt; &lt;fct&gt;                       
##  1      31 Dangerous Minds                     1995 Drama                       
##  2    1029 Dumbo                               1941 Animation|Children|Drama|Mu…
##  3    1061 Sleepers                            1996 Thriller                    
##  4    1129 Escape from New York                1981 Action|Adventure|Sci-Fi|Thr…
##  5    1172 Cinema Paradiso (Nuovo cinema Par…  1989 Drama                       
##  6    1263 Deer Hunter, The                    1978 Drama|War                   
##  7    1287 Ben-Hur                             1959 Action|Adventure|Drama      
##  8    1293 Gandhi                              1982 Drama                       
##  9    1339 Dracula (Bram Stoker&#39;s Dracula)     1992 Fantasy|Horror|Romance|Thri…
## 10    1343 Cape Fear                           1991 Thriller                    
## # … with 99,994 more rows</code></pre>
<pre class="r"><code>movieLens %&gt;%
  filter(genres == &quot;Romance&quot;) %&gt;%
  select(year, title, genres)</code></pre>
<pre><code>## # A tibble: 63 x 3
##     year title                    genres 
##    &lt;int&gt; &lt;chr&gt;                    &lt;fct&gt;  
##  1  1998 Meet Joe Black           Romance
##  2  1998 Meet Joe Black           Romance
##  3  1984 Against All Odds         Romance
##  4  1988 Everybody&#39;s All-American Romance
##  5  1998 Meet Joe Black           Romance
##  6  1998 Meet Joe Black           Romance
##  7  1998 Meet Joe Black           Romance
##  8  2004 Raise Your Voice         Romance
##  9  1998 Meet Joe Black           Romance
## 10  1998 Meet Joe Black           Romance
## # … with 53 more rows</code></pre>
<pre class="r"><code>movieLens %&gt;%
  filter(str_select(genres, &quot;Comedy&quot;)) %&gt;% ### SOLUTION HERE ###
  select(year, title, genres)</code></pre>
<pre><code>## Error: Problem with `filter()` input `..1`.
## x could not find function &quot;str_select&quot;
## ℹ Input `..1` is `str_select(genres, &quot;Comedy&quot;)`.</code></pre>
</div>
<div id="exercise-4" class="section level3">
<h3>Exercise 4</h3>
<p>Some of our variables are currently in <em>camelCase</em> (in fact, <em>movieLens</em> is in camelCase). Let’s clean these two variables to be <em>snake_case</em> instead, and assign our post-rename object back to “movieLens”.</p>
<pre class="r"><code>movieLens &lt;-
movieLens %&gt;%
  rename(user_id = userId,
         movie_id = movieId) ### SOLUTION HERE ###</code></pre>
<p>As you already know, mutate() defines and inserts new variables into a tibble. There is <em>another mystery function</em> that you’ve seen already that adds the new variable, and drops existing ones. I wanted to create an average_rating column that takes the mean(rating) across all entries, and I only want to see that variable (i.e drop all others!) but I forgot what that mystery function is. Can you remember?</p>
<pre class="r"><code>transmute(movieLens,
          average_rating = mean(rating)) ### SOLUTION HERE ###</code></pre>
<pre><code>## # A tibble: 100,004 x 1
##    average_rating
##             &lt;dbl&gt;
##  1           3.54
##  2           3.54
##  3           3.54
##  4           3.54
##  5           3.54
##  6           3.54
##  7           3.54
##  8           3.54
##  9           3.54
## 10           3.54
## # … with 99,994 more rows</code></pre>
</div>
<div id="exercise-5" class="section level3">
<h3>Exercise 5</h3>
<p>I’m interested in arranging movies from the year 1998 by their descending rating. Then, I would like to rearrange the columns to show <code>rating</code> followed by <code>title</code>, and then followed by everything else.</p>
<pre class="r"><code>movieLens %&gt;%
  filter(year == 1998) %&gt;%
  arrange(desc(rating)) %&gt;%
  select(rating, title, everything())</code></pre>
<pre><code>## # A tibble: 4,019 x 7
##    rating title             movie_id  year genres              user_id timestamp
##     &lt;dbl&gt; &lt;chr&gt;                &lt;int&gt; &lt;int&gt; &lt;fct&gt;                 &lt;int&gt;     &lt;int&gt;
##  1      5 Wedding Singer, …     1777  1998 Comedy|Romance            8    1.15e9
##  2      5 American History…     2329  1998 Crime|Drama               8    1.15e9
##  3      5 Truman Show, The      1682  1998 Comedy|Drama|Sci-Fi       9    9.39e8
##  4      5 There&#39;s Somethin…     1923  1998 Comedy|Romance           10    9.43e8
##  5      5 Out of Sight          1912  1998 Comedy|Crime|Drama…      15    1.03e9
##  6      5 Rushmore              2395  1998 Comedy|Drama             15    9.98e8
##  7      5 Fear and Loathin…     1884  1998 Adventure|Comedy|D…      17    1.13e9
##  8      5 Pi                    1921  1998 Drama|Sci-Fi|Thril…      17    1.13e9
##  9      5 Following             2579  1998 Crime|Mystery|Thri…      17    1.13e9
## 10      5 Sliding Doors         1680  1998 Drama|Romance            20    1.22e9
## # … with 4,009 more rows</code></pre>
<p>Instead of filtering to a specific year, group the movies by year, and then arrange by ascending rating. Lastly, select only the year, title, and rating, in that order.</p>
<p><em>Hint:</em> Grouped arrange needs one more argument…</p>
<pre class="r"><code>movieLens %&gt;%
  group_by(year) %&gt;%
  arrange(rating, .by_group = TRUE) %&gt;% ### SOLUTION HERE ###
  select(year:rating)</code></pre>
<pre><code>## # A tibble: 100,004 x 4
## # Groups:   year [104]
##     year genres                          user_id rating
##    &lt;int&gt; &lt;fct&gt;                             &lt;int&gt;  &lt;dbl&gt;
##  1  1902 Action|Adventure|Fantasy|Sci-Fi     262    3  
##  2  1902 Action|Adventure|Fantasy|Sci-Fi     378    4  
##  3  1902 Action|Adventure|Fantasy|Sci-Fi     299    4.5
##  4  1902 Action|Adventure|Fantasy|Sci-Fi     468    4.5
##  5  1902 Action|Adventure|Fantasy|Sci-Fi     481    5  
##  6  1902 Action|Adventure|Fantasy|Sci-Fi     547    5  
##  7  1915 Drama|War                           262    2.5
##  8  1915 Drama|War                           468    3.5
##  9  1916 Action|Adventure|Sci-Fi             468    3.5
## 10  1917 Comedy                              648    4  
## # … with 99,994 more rows</code></pre>
</div>
<div id="exercise-6" class="section level3">
<h3>Exercise 6</h3>
<p>Alone, tally() is a short form of summarise(). Count() is short-hand for group_by() and tally().</p>
<ul>
<li>Each entry of the movieLens table corresponds to a movie rating by a user. Therefore, if more than one user rated the same movie, there will be several entries for the same movie. I want to find out how many times each movie has been reviewed, or in other words, how many times each movie title appears in the dataset.</li>
</ul>
<pre class="r"><code>movieLens %&gt;%
  group_by(title) %&gt;%
  tally()</code></pre>
<pre><code>## # A tibble: 8,832 x 2
##    title                                n
##    &lt;chr&gt;                            &lt;int&gt;
##  1 ¡Three Amigos!                      31
##  2 ...And God Spoke                     1
##  3 ...And Justice for All              13
##  4 &#39;burbs, The                         19
##  5 &#39;Hellboy&#39;: The Seeds of Creation     1
##  6 &#39;Neath the Arizona Skies             1
##  7 &#39;night Mother                        3
##  8 &#39;Round Midnight                      2
##  9 &#39;Salem&#39;s Lot                         1
## 10 &#39;Til There Was You                   4
## # … with 8,822 more rows</code></pre>
<ul>
<li>Without using group_by(), I want to find out how many movie reviews there have been by year.</li>
</ul>
<pre class="r"><code>### SOLUTION HERE ###
movieLens %&gt;%
  count(year, sort = TRUE)</code></pre>
<pre><code>## # A tibble: 104 x 2
##     year     n
##    &lt;int&gt; &lt;int&gt;
##  1  1995  6635
##  2  1994  5861
##  3  1996  5109
##  4  1999  5034
##  5  1993  4214
##  6  1997  4060
##  7  2000  4054
##  8  1998  4019
##  9  2001  3442
## 10  2002  3090
## # … with 94 more rows</code></pre>
<ul>
<li>Both count() and tally() can be called repeatedly, each time adding up a level of detail. Below, I want to count the number of movie reviews by title and rating, and sort the results.</li>
</ul>
<pre class="r"><code>movieLens %&gt;%
  count(title, rating, sort = TRUE) ### SOLUTION HERE ###</code></pre>
<pre><code>## # A tibble: 28,297 x 3
##    title                              rating     n
##    &lt;chr&gt;                               &lt;dbl&gt; &lt;int&gt;
##  1 Shawshank Redemption, The               5   170
##  2 Pulp Fiction                            5   138
##  3 Star Wars: Episode IV - A New Hope      5   122
##  4 Forrest Gump                            4   113
##  5 Schindler&#39;s List                        5   109
##  6 Godfather, The                          5   107
##  7 Forrest Gump                            5   102
##  8 Silence of the Lambs, The               4   102
##  9 Fargo                                   5   100
## 10 Silence of the Lambs, The               5   100
## # … with 28,287 more rows</code></pre>
<p>Not only do count() and tally() quickly allow you to count items within your dataset, add_tally() and add_count() are handy shortcuts that add an additional columns to your tibble, rather than collapsing each group.</p>
<ul>
<li>Suppose that I am interested in finding movies that have very few reviews, very few being under 5. Without using group_by(), add a column that counts the <em>number of reviews per movie title</em>, and then filter to those that have 5 reviews or under. Rename the column <code>n</code> to <code>n_reviews</code>.</li>
</ul>
<pre class="r"><code>movieLens %&gt;%
  add_count(title) %&gt;%
  filter(n &lt;= 5) %&gt;% ### SOLUTION HERE ###
  mutate(n_reviews = n) </code></pre>
<pre><code>## # A tibble: 11,543 x 9
##    movie_id title         year genres   user_id rating timestamp     n n_reviews
##       &lt;int&gt; &lt;chr&gt;        &lt;int&gt; &lt;fct&gt;      &lt;int&gt;  &lt;dbl&gt;     &lt;int&gt; &lt;int&gt;     &lt;int&gt;
##  1    27369 Daria: Is I…  2000 Animati…       3    3.5    1.30e9     2         2
##  2    48783 Flags of Ou…  2006 Drama|W…       3    4.5    1.30e9     4         4
##  3    84236 White Strip…  2009 Documen…       3    4      1.30e9     1         1
##  4     2086 One Magic C…  1985 Drama|F…       4    5      9.50e8     1         1
##  5     2091 Return from…  1978 Childre…       4    5      9.50e8     3         3
##  6     2659 It Came fro…  1982 Comedy|…       4    3      9.50e8     3         3
##  7     2902 Psycho II     1983 Horror|…       4    2      9.50e8     4         4
##  8     2903 Psycho III    1986 Horror|…       4    1      9.50e8     3         3
##  9    42007 Rumor Has I…  2005 Comedy|…       8    2      1.15e9     3         3
## 10    43556 Annapolis     2006 Drama          8    3.5    1.15e9     1         1
## # … with 11,533 more rows</code></pre>
</div>
<div id="exercise-7" class="section level3">
<h3>Exercise 7</h3>
<ul>
<li>Calculate the mean rating by title and store it in a new variable <code>avg_rating</code>.</li>
</ul>
<pre class="r"><code>movieLens %&gt;%
  group_by(title) %&gt;%
  summarize(avg_rating = mean(rating))</code></pre>
<pre><code>## `summarise()` ungrouping output (override with `.groups` argument)</code></pre>
<pre><code>## # A tibble: 8,832 x 2
##    title                            avg_rating
##    &lt;chr&gt;                                 &lt;dbl&gt;
##  1 ¡Three Amigos!                         3.26
##  2 ...And God Spoke                       1   
##  3 ...And Justice for All                 3.69
##  4 &#39;burbs, The                            3.05
##  5 &#39;Hellboy&#39;: The Seeds of Creation       2   
##  6 &#39;Neath the Arizona Skies               0.5 
##  7 &#39;night Mother                          5   
##  8 &#39;Round Midnight                        2.25
##  9 &#39;Salem&#39;s Lot                           3.5 
## 10 &#39;Til There Was You                     2.62
## # … with 8,822 more rows</code></pre>
<ul>
<li>Calculate the mean rating by year and store it in a new variable <code>avg_rating</code>.</li>
</ul>
<pre class="r"><code>movieLens %&gt;%
  group_by(year) %&gt;%
  summarize(avg_rating = mean(rating))</code></pre>
<pre><code>## `summarise()` ungrouping output (override with `.groups` argument)</code></pre>
<pre><code>## # A tibble: 104 x 2
##     year avg_rating
##    &lt;int&gt;      &lt;dbl&gt;
##  1  1902       4.33
##  2  1915       3   
##  3  1916       3.5 
##  4  1917       4.25
##  5  1918       4.25
##  6  1919       3   
##  7  1920       3.7 
##  8  1921       4.42
##  9  1922       3.80
## 10  1923       4.17
## # … with 94 more rows</code></pre>
<ul>
<li>Using summarize(), find the minimum and the maximum rating by title, and store these new variables under <code>min_rating</code>, and <code>max_rating</code>, respectively.</li>
</ul>
<pre class="r"><code>movieLens %&gt;%
  group_by(title) %&gt;%
  summarize(min_rating = min(rating), max_rating = max(rating)) ### SOLUTION HERE ###</code></pre>
<pre><code>## `summarise()` ungrouping output (override with `.groups` argument)</code></pre>
<pre><code>## # A tibble: 8,832 x 3
##    title                            min_rating max_rating
##    &lt;chr&gt;                                 &lt;dbl&gt;      &lt;dbl&gt;
##  1 ¡Three Amigos!                          1          5  
##  2 ...And God Spoke                        1          1  
##  3 ...And Justice for All                  1          5  
##  4 &#39;burbs, The                             1.5        4.5
##  5 &#39;Hellboy&#39;: The Seeds of Creation        2          2  
##  6 &#39;Neath the Arizona Skies                0.5        0.5
##  7 &#39;night Mother                           5          5  
##  8 &#39;Round Midnight                         0.5        4  
##  9 &#39;Salem&#39;s Lot                            3.5        3.5
## 10 &#39;Til There Was You                      0.5        4  
## # … with 8,822 more rows</code></pre>
<ul>
<li>Using group_by() and summarize(), find the number of reviews per movie title, and arrange in order of descending number of reviews. Notice that we achieved the same result in the previous exercise using tally().</li>
</ul>
<pre class="r"><code>movieLens %&gt;%
    group_by(title) %&gt;%
    summarise(n_reviews = n()) %&gt;%
    arrange(desc(n_reviews))</code></pre>
<pre><code>## `summarise()` ungrouping output (override with `.groups` argument)</code></pre>
<pre><code>## # A tibble: 8,832 x 2
##    title                              n_reviews
##    &lt;chr&gt;                                  &lt;int&gt;
##  1 Forrest Gump                             341
##  2 Pulp Fiction                             324
##  3 Shawshank Redemption, The                311
##  4 Silence of the Lambs, The                304
##  5 Star Wars: Episode IV - A New Hope       291
##  6 Jurassic Park                            274
##  7 Matrix, The                              259
##  8 Toy Story                                247
##  9 Schindler&#39;s List                         244
## 10 Terminator 2: Judgment Day               237
## # … with 8,822 more rows</code></pre>
</div>
<div id="exercise-8" class="section level3">
<h3>Exercise 8</h3>
<p>Across() is a new dplyr function (dplyr 1.0.0) that allows you to apply a transformation to multiple variables selected with the select() and rename() syntax. For this section, we will use the <code>starwars</code> dataset, which is built into R. First, let’s transform it into a tibble and store it under the variable <code>starWars</code>.</p>
<pre class="r"><code>starWars &lt;- as_tibble(starwars)</code></pre>
<ul>
<li>Find the mean for all columns that are numeric.</li>
</ul>
<pre class="r"><code>starWars %&gt;%
  summarise(across(where(as.numeric), mean)) ### SOLUTION HERE ###</code></pre>
<pre><code>## Warning in predicate(x, ...): NAs introduced by coercion</code></pre>
<pre><code>## Error: Problem with `summarise()` input `..1`.
## x `where()` must be used with functions that return `TRUE` or `FALSE`.
## ℹ Input `..1` is `across(where(as.numeric), mean)`.</code></pre>
<ul>
<li>Find the minimum height and weight within each species.</li>
</ul>
<pre class="r"><code>starWars %&gt;%
  group_by(species) %&gt;%
  summarise(across(c(height, weight), min)) ### SOLUTION HERE ###</code></pre>
<pre><code>## Error: Problem with `summarise()` input `..1`.
## x Can&#39;t subset columns that don&#39;t exist.
## x Column `weight` doesn&#39;t exist.
## ℹ Input `..1` is `across(c(height, weight), min)`.
## ℹ The error occurred in group 1: species = &quot;Aleena&quot;.</code></pre>
<ul>
<li>Find the number of distinct names and homeworlds by each species.</li>
</ul>
<pre class="r"><code>### SOLUTION HERE ###
starWars %&gt;%
  group_by(species) %&gt;%
  filter(n() &gt; 1) %&gt;%
  summarise(across(c(name, homeworld), n_distinct))</code></pre>
<pre><code>## `summarise()` ungrouping output (override with `.groups` argument)</code></pre>
<pre><code>## # A tibble: 9 x 3
##   species   name homeworld
##   &lt;chr&gt;    &lt;int&gt;     &lt;int&gt;
## 1 Droid        6         3
## 2 Gungan       3         1
## 3 Human       35        16
## 4 Kaminoan     2         1
## 5 Mirialan     2         1
## 6 Twi&#39;lek      2         1
## 7 Wookiee      2         1
## 8 Zabrak       2         2
## 9 &lt;NA&gt;         4         3</code></pre>
</div>
<div id="exercise-9" class="section level3">
<h3>Exercise 9</h3>
<p>The <code>singer</code> package was created by Joey Bernhardt, and it contains 3 datasets that are excerpts from the Million Songs Dataset. The <code>songs</code> and the <code>locations</code> package will be used here. These two datasets have the columns <code>artist_name</code> and <code>title</code> in common.</p>
<ul>
<li>The R merge() function automatically joins the frames by common variable names. Merge <code>songs</code> and <code>locations</code> using one of the join family of functions (<code>inner_join()</code>, <code>outer_join()</code>, <code>right_join()</code>, etc…), without specifying the key variable.</li>
</ul>
<pre class="r"><code>### SOLUTION HERE ###
inner_join(songs, locations)</code></pre>
<pre><code>## Joining, by = c(&quot;title&quot;, &quot;artist_name&quot;)</code></pre>
<pre><code>## # A tibble: 13 x 5
##    title                      artist_name    year city       release            
##    &lt;chr&gt;                      &lt;chr&gt;         &lt;int&gt; &lt;chr&gt;      &lt;chr&gt;              
##  1 &quot;Grievance&quot;                Pearl Jam      2000 Seattle, … Binaural           
##  2 &quot;Stupidmop&quot;                Pearl Jam      1994 Seattle, … Vitalogy           
##  3 &quot;Present Tense&quot;            Pearl Jam      1996 Seattle, … No Code            
##  4 &quot;MFC&quot;                      Pearl Jam      1998 Seattle, … Live On Two Legs   
##  5 &quot;Lukin&quot;                    Pearl Jam      1996 Seattle, … Seattle Washington…
##  6 &quot;It&#39;s Lulu&quot;                The Boo Radl…  1995 Liverpool… Best Of            
##  7 &quot;Sparrow&quot;                  The Boo Radl…  1992 Liverpool… Everything&#39;s Alrig…
##  8 &quot;High as Monkeys&quot;          The Boo Radl…  1998 Liverpool… Kingsize           
##  9 &quot;Butterfly McQueen&quot;        The Boo Radl…  1993 Liverpool… Giant Steps        
## 10 &quot;My One and Only Love&quot;     Carly Simon    2005 New York,… Moonlight Serenade 
## 11 &quot;It Was So Easy  (LP Vers… Carly Simon    1972 New York,… No Secrets         
## 12 &quot;I&#39;ve Got A Crush On You&quot;  Carly Simon    1994 New York,… Clouds In My Coffe…
## 13 &quot;Manha De Carnaval (Theme… Carly Simon    2007 New York,… Into White</code></pre>
<ul>
<li>Join <code>songs</code> and <code>locations</code> in a way that drops all observations from <code>songs</code> that <em>do not</em> have a match in <code>locations</code>.</li>
</ul>
<pre class="r"><code>### SOLUTION HERE ###
anti_join(songs, locations)</code></pre>
<pre><code>## Joining, by = c(&quot;title&quot;, &quot;artist_name&quot;)</code></pre>
<pre><code>## # A tibble: 9 x 3
##   title                            artist_name      year
##   &lt;chr&gt;                            &lt;chr&gt;           &lt;int&gt;
## 1 Corduroy                         Pearl Jam        1994
## 2 Martin_ Doom! It&#39;s Seven O&#39;Clock The Boo Radleys  1995
## 3 Leaves And Sand                  The Boo Radleys  1993
## 4 Comb Your Hair                   The Boo Radleys  1998
## 5 Mine Again                       Mariah Carey     2005
## 6 Don&#39;t Forget About Us            Mariah Carey     2005
## 7 Babydoll                         Mariah Carey     1997
## 8 Don&#39;t Forget About Us            Mariah Carey     2005
## 9 Vision Of Love                   Mariah Carey     1990</code></pre>
<ul>
<li>Combine <code>locations</code> and <code>songs</code> to find only the entries that correspond to song titles in the <code>locations</code> dataset.</li>
</ul>
<pre class="r"><code>### SOLUTION HERE ###
right_join(songs, locations)</code></pre>
<pre><code>## Joining, by = c(&quot;title&quot;, &quot;artist_name&quot;)</code></pre>
<pre><code>## # A tibble: 14 x 5
##    title                      artist_name    year city       release            
##    &lt;chr&gt;                      &lt;chr&gt;         &lt;int&gt; &lt;chr&gt;      &lt;chr&gt;              
##  1 &quot;Grievance&quot;                Pearl Jam      2000 Seattle, … Binaural           
##  2 &quot;Stupidmop&quot;                Pearl Jam      1994 Seattle, … Vitalogy           
##  3 &quot;Present Tense&quot;            Pearl Jam      1996 Seattle, … No Code            
##  4 &quot;MFC&quot;                      Pearl Jam      1998 Seattle, … Live On Two Legs   
##  5 &quot;Lukin&quot;                    Pearl Jam      1996 Seattle, … Seattle Washington…
##  6 &quot;It&#39;s Lulu&quot;                The Boo Radl…  1995 Liverpool… Best Of            
##  7 &quot;Sparrow&quot;                  The Boo Radl…  1992 Liverpool… Everything&#39;s Alrig…
##  8 &quot;High as Monkeys&quot;          The Boo Radl…  1998 Liverpool… Kingsize           
##  9 &quot;Butterfly McQueen&quot;        The Boo Radl…  1993 Liverpool… Giant Steps        
## 10 &quot;My One and Only Love&quot;     Carly Simon    2005 New York,… Moonlight Serenade 
## 11 &quot;It Was So Easy  (LP Vers… Carly Simon    1972 New York,… No Secrets         
## 12 &quot;I&#39;ve Got A Crush On You&quot;  Carly Simon    1994 New York,… Clouds In My Coffe…
## 13 &quot;Manha De Carnaval (Theme… Carly Simon    2007 New York,… Into White         
## 14 &quot;Stuck On Amber&quot;           The Boo Radl…    NA Liverpool… Wake Up!</code></pre>
<ul>
<li>Merge <code>songs</code> and <code>locations</code> so that <em>all information</em> from both datasets is combined.</li>
</ul>
<pre class="r"><code>### SOLUTION HERE ###
full_join(songs, locations)</code></pre>
<pre><code>## Joining, by = c(&quot;title&quot;, &quot;artist_name&quot;)</code></pre>
<pre><code>## # A tibble: 23 x 5
##    title                 artist_name    year city         release               
##    &lt;chr&gt;                 &lt;chr&gt;         &lt;int&gt; &lt;chr&gt;        &lt;chr&gt;                 
##  1 Corduroy              Pearl Jam      1994 &lt;NA&gt;         &lt;NA&gt;                  
##  2 Grievance             Pearl Jam      2000 Seattle, WA  Binaural              
##  3 Stupidmop             Pearl Jam      1994 Seattle, WA  Vitalogy              
##  4 Present Tense         Pearl Jam      1996 Seattle, WA  No Code               
##  5 MFC                   Pearl Jam      1998 Seattle, WA  Live On Two Legs      
##  6 Lukin                 Pearl Jam      1996 Seattle, WA  Seattle Washington No…
##  7 It&#39;s Lulu             The Boo Radl…  1995 Liverpool, … Best Of               
##  8 Sparrow               The Boo Radl…  1992 Liverpool, … Everything&#39;s Alright …
##  9 Martin_ Doom! It&#39;s S… The Boo Radl…  1995 &lt;NA&gt;         &lt;NA&gt;                  
## 10 Leaves And Sand       The Boo Radl…  1993 &lt;NA&gt;         &lt;NA&gt;                  
## # … with 13 more rows</code></pre>
</div>
<div id="exercise-10" class="section level3">
<h3>Exercise 10</h3>
<p>Time for reviewing… and tibbles!</p>
<ul>
<li><p>Create a tibble with 4 columns, <code>birth_year</code>, <code>name</code>, <code>birth_weight</code>, and <code>birth_location</code>. <code>birth_year</code> should contain years 1998 to 2005 (inclusive), <code>name</code> should contain the first 8 names in the <code>starWars</code> dataset <code>name</code> column, and <code>birth_weight</code> should take the <code>year</code> column, subtract 1995, and multiply by 0.45. <code>birth_location</code> should contain 8 randomly sampled locations in the <code>locations</code> dataset <code>city</code> column.</p></li>
<li><p>This tibble should be stored in the variable <code>fakeStarWars</code>.</p></li>
</ul>
<pre class="r"><code>fakeStarWars &lt;-
tibble(birth_year == &quot;1998:2005&quot;,
       name == starWars$name[,1:8],
       birth_weight == (birth_year - 1995) * 0.45,
       birth_location == sample(locations$city, size = 8))</code></pre>
<pre><code>## Error in eval_tidy(xs[[j]], mask): object &#39;birth_year&#39; not found</code></pre>
<p>Let’s look at this new tibble.</p>
<pre class="r"><code>fakeStarWars</code></pre>
<pre><code>## Error in eval(expr, envir, enclos): object &#39;fakeStarWars&#39; not found</code></pre>
<ul>
<li>Without assigning it to any variables, define the same tibble row-by-row with tribble(), with the columns in the following order: <code>name</code>, <code>birth_weight</code>, <code>birth_year</code>, <code>birth_location</code>.</li>
</ul>
<pre class="r"><code>### SOLUTION HERE ###
tribble(
  ~name,            ~birth_weight,  ~birth_year, ~birth_location
  &quot;Luke Skywalker&quot;,  1.35      ,   1998        ,  &quot;Liverpool, England&quot;,
  &quot;C-3PO&quot;         ,  1.80      ,   1999        ,  &quot;Liverpool, England&quot;,
  &quot;R2-D2&quot;         ,  2.25      ,   2000        ,  &quot;Seattle, WA&quot;,
  &quot;Darth Vader&quot;   ,  2,70      ,   2001        ,  &quot;Liverpool, England&quot;,
  &quot;Leia Organa&quot;   ,  3.15      ,   2002        ,  &quot;New York, NY&quot;,
  &quot;Owen Lars&quot;     ,  3.60      ,   2003        ,  &quot;Seattle, WA&quot;,
  &quot;Beru Whitesun Iars&quot;, 4.05   ,   2004        ,  &quot;Liverpool, England&quot;,
  &quot;R5-D4&quot;         ,  4.50      ,   2005        ,  &quot;New York, NY&quot;,
)</code></pre>
<pre><code>## Error: &lt;text&gt;:4:3: unexpected string constant
## 3:   ~name,            ~birth_weight,  ~birth_year, ~birth_location
## 4:   &quot;Luke Skywalker&quot;
##      ^</code></pre>
<p>Now, for the grand finale!</p>
<ul>
<li>Rearrange variables from the <code>fakeStarWars</code> dataset to be in the following order: <code>name</code>, <code>birth_year</code>, <code>birth_weight</code>, <code>birth_location</code>.</li>
<li>Rename <code>birth_year</code> to <code>year</code>.</li>
<li>Combine <code>fakeStarWars</code> to <code>gapminder_almost</code> by <code>year</code>, so that only those entries with a year that is present in <code>fakeStarWars</code> are merged.</li>
<li>Drop variables <code>country</code>, <code>continent</code>, <code>pop</code>, and <code>gdpPercap</code>.</li>
<li>Add a column that summarizes the number of times that <code>birth_location</code> entries are repeated, and name it “n_location”.</li>
<li>Filter out locations repeated under 4 times.</li>
<li>Arrange by descending birth weight.</li>
<li>Drop any rows with NA values in any variable.</li>
<li>Join with the <code>starwars</code> dataset so that only those rows that are <em>present in <code>fakeStarWars</code></em> are combined.</li>
<li>Calculate BMI (body mass index) by dividing weight (<code>mass</code>) by squared <code>height</code> <em>in meters</em>. Store it in a column with the name <code>bmi</code>.</li>
</ul>
<pre class="r"><code>### SOLUTION HERE ###
fakeStarWars %&gt;%
  select(name, starts_with(&quot;birth&quot;)) %&gt;%
  rename(year = birth_year) %&gt;%
  left_join(gapminder_almost, by = &quot;year&quot;) %&gt;%
  select(-c(country, continent, pop:gdpPercap)) %&gt;%
  add_count(birth_location, name = &quot;n_location&quot;) %&gt;%
  filter(!n_location &lt; 4) %&gt;%
  arrange(desc(birth_weight)) %&gt;%
  drop_na() %&gt;%
  inner_join(starwars) %&gt;%
  mutate(bmi = mass / (height / 100) ^ 2)</code></pre>
<pre><code>## Error in eval(lhs, parent, parent): object &#39;fakeStarWars&#39; not found</code></pre>
</div>
</div>
