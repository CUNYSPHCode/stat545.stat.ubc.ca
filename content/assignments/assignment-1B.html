---
title: "Assignment B-1: Making a function"
output: html_document
---

<script src="/rmarkdown-libs/header-attrs/header-attrs.js"></script>


<p><strong>Total Points</strong>: 20</p>
<p>This assignment first covers making a function, then using list columns (Exercise 2, covered in Week 2) to explore a data set.</p>
<ul class="task-list">
<li><input type="checkbox" disabled="" />
For your convenience, we’ve indicated all action items with a checkbox, like so.</li>
</ul>
<div id="setup" class="section level2">
<h2>Setup</h2>
<ol style="list-style-type: decimal">
<li><input type="checkbox" disabled="" />
Go to canvas to get your invitation to the STAT 545 homework GitHub Organization. You can find this in the description of Assignment 1-B.</li>
<li><input type="checkbox" disabled="" />
Work within your <code>assignment-1b</code> folder in your new repository, and complete the assignment by filling in this very .Rmd file. Your repo will be seeded with instructions for this milestone. Commit and push your work early and often (although this will not be graded, many students end up in situations where they wish they pushed more frequently).</li>
</ol>
</div>
<div id="tidy-submission-2-points" class="section level2">
<h2>Tidy Submission (2 points)</h2>
<p>Follow these steps to submit your work. Be sure to familiarize yourself with the rubric for a tidy submission below, before doing these steps.</p>
<ol style="list-style-type: decimal">
<li><input type="checkbox" disabled="" />
Make a README file in your <code>assignment-1b</code> folder. It should let a visitor know what’s in this folder.</li>
<li><input type="checkbox" disabled="" />
Make/update a main README file for your entire repository. It should orient a visitor to what this repository <em>is</em>, and that visitor should know how to engage with the repository. There should not be much here.</li>
<li><input type="checkbox" disabled="" />
Make your assignment appear nicely rendered and viewable online, such as by changing the output to <code>output: github_document</code> in the YAML header.<ul>
<li>You could also use GitHub pages. But, the assignment needs to correspond to the tagged release, and we still need to be able to navigate to your repository somehow.</li>
</ul></li>
<li><input type="checkbox" disabled="" />
Tag a release in your GitHub repository corresponding to your submission before the deadline.<ul>
<li>Forgotten how to tag a release? We have instructions at the bottom of the <a href="https://stat545.stat.ubc.ca/collaborative-project/milestone1/readme/">Collaborative Milestone 1 repo</a> from STAT 545A.</li>
</ul></li>
<li><input type="checkbox" disabled="" />
Grab the URL corresponding to your tagged release, and submit that to canvas.</li>
</ol>
<p><strong>Rubric</strong>:</p>
<ul>
<li>The above steps were followed.</li>
<li>Your work is self-contained in the <code>assignment-1b</code> folder.</li>
<li>Your work must be reproducible from beginning to end. That is, a member of the teaching team should be able to run all code error-free and reproduce the output files.</li>
<li>You use proper English, spelling, and grammar, and write concisely. If there’s any uncertainty in determining a grade here, the <a href="https://github.com/UBC-MDS/public/blob/master/rubric/rubric_writing.md">UBC MDS writing rubric</a> will be referred to.</li>
<li>If there’s any further uncertainty in determining a grade for this tidy submission portion, the <a href="https://github.com/UBC-MDS/public/blob/master/rubric/rubric_mech.md">UBC MDS mechanics rubric</a> will be referred to.</li>
</ul>
</div>
<div id="exercise-1-functions-10-points" class="section level2">
<h2>Exercise 1: Functions (10 points)</h2>
<p>In this exercise, you’ll be making a function and fortifying it. The function need not be complicated. The function need not be “serious”, but shouldn’t be nonsense.</p>
<p><strong>Function Ideas</strong></p>
<p>Basic:</p>
<ul>
<li>Did you repeat any code for a data analysis in STAT 545A? If so, consider making a function for this action.</li>
<li>Write a <em>wrapper</em> around an existing function.
<ul>
<li>For example, perhaps accepting a narrower range of inputs (like not allowing logical vectors), or providing a different output.</li>
<li>A specific example: my <a href="https://github.com/vincenzocoia/rqdist/blob/master/R/rqdist.R#L1"><code>rqdist()</code> function</a> is a wrapper around <code>quantreg::rq()</code>, narrowing its functionality.</li>
<li>It’s usually better to narrow a function’s focus than to broaden, so that a function doesn’t end up doing too much.</li>
</ul></li>
<li>Make a function extracting parts of an <code>"lm"</code> object that you can’t easily access (<code>broom</code> aside), or measuring the “difference” between a linear and quadratic fit.</li>
<li>Make a special plot that you’d want to repeat when exploring your data.</li>
<li>You might find a function useful to apply for Exercise 2.</li>
</ul>
<p>Advanced:</p>
<ul>
<li>Make a new ggplot2 geom. Need inspiration? Fun ideas count – <a href="https://github.com/coolbutuseless/geomlime"><code>geom_lime()</code> and <code>geom_pint()</code></a> are great examples (thanks, Asfar, for finding this) – but it’s not enough to make something like <code>geom_parrot()</code> based on these functions, because there’s not enough original work to answer the questions we have for you.</li>
<li>Fit a Beverton-Holt model (or some other scientifically motivated parametric function) to some data via least squares or some other method.</li>
<li><a href="https://www.tidymodels.org/learn/develop/broom/">Create your own <code>broom</code> tidier function</a> for a model that’s currently incompatible with <code>broom</code> (warning: this uses S3 object oriented programming, but you don’t need to implement that for this assignment).</li>
</ul>
<p><strong>Caveats</strong></p>
<p>The first three caveats are prone to a penalty of -1 point.</p>
<ul>
<li><strong>Other sources</strong>: We need to see your own work here. You <em>can</em> use someone’s function as inspiration for your function, just be sure to (1) reference the source of inspiration for your function, and (2) you should be able to answer the questions in this Exercise for your own work.</li>
<li><strong>Nonsense</strong>: The function should be sensible. Example of a nonsense function: <code>function(x, y) x ^ (x + y) + x / y ^ x - 1</code>.</li>
<li><strong>Making more than one function</strong>: You might encounter this situation if a task is too big for one function, and you just wouldn’t be satisfied with yourself if you only made one function. If so, it sounds like you’re well on your way to making an R package in Week 3 (Assignment 2-B), so definitely keep the idea. We’ll only be grading one function for this assignment though, so if you make more than one, please let us know which one you’d like to be graded.</li>
</ul>
<div id="documentation-and-design-5" class="section level3">
<h3>1.1 Documentation and Design (5)</h3>
<table>
<colgroup>
<col width="41%" />
<col width="36%" />
<col width="22%" />
</colgroup>
<thead>
<tr class="header">
<th>Rubric</th>
<th>Description</th>
<th>Points</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Documentation</td>
<td>Documentation is complete, according to the instructions.</td>
<td>1</td>
</tr>
<tr class="even">
<td>Focussed</td>
<td>Your function doesn’t do too many actions – it does one thing, as described in your description.</td>
<td>1</td>
</tr>
<tr class="odd">
<td>Generalised</td>
<td><em>See below</em></td>
<td>2</td>
</tr>
<tr class="even">
<td>Format</td>
<td><em>See below</em></td>
<td>1</td>
</tr>
</tbody>
</table>
<p>In the space below, document your function:</p>
<p>Use roxygen2 tags.</p>
<ul class="task-list">
<li><input type="checkbox" disabled="" />
<strong>Description</strong>: In 1-2 brief sentences, describe what the function does.<ul>
<li>As a model answer, check out the “Description” section (the very first section) in the documentation of an R function that you know and love.</li>
<li>Technical language is OK (like “Generalised Linear Model”), but not a step-by-step written account of each line. If you feel the need to add more details, separate these details from the main description. In fact, many functions have a “Details” section in their documentation! Just check out <code>lm()</code> as an example – but don’t go overboard like that.</li>
</ul></li>
<li><input type="checkbox" disabled="" />
For each <strong>argument</strong>,<ul class="task-list">
<li><input type="checkbox" disabled="" />
Write the argument name.</li>
<li><input type="checkbox" disabled="" />
Describe the input: What restrictions are there – should it be a vector? A list? A specific type of vector, like numeric? If there’s a default value, specify what the default is.</li>
<li><input type="checkbox" disabled="" />
Briefly justify (1-2 sentences) your choice of name and (if applicable) default value.</li>
</ul></li>
<li><input type="checkbox" disabled="" />
For the <strong>output</strong>:<ul class="task-list">
<li><input type="checkbox" disabled="" />
Describe the object that’s returned. Is it a vector? A list? Is it a numeric vector? What does the object represent?</li>
<li><input type="checkbox" disabled="" />
Briefly justify (1-2 sentences) your choice of output format.</li>
</ul></li>
</ul>
<p>Here’s an elaboration on the rubrics:</p>
<p><strong>Generalised</strong></p>
<p>Your function should not be specific to a decision that you made for an analysis. Use function arguments to accomplish being able to use this function in other analyses. The following examples are signs that you need to use more arguments to generalise your function:</p>
<ul>
<li>Your function should not rely on anything from your working environment.</li>
<li>Your function should not rely on “magic numbers” – pre-selected numbers (or options) that appear inside the function that can’t be accessed by a user of the function.
<ul>
<li>For example, maybe <code>quantile(x, type = 1, ...)</code> appears in your function. The choice of 1 is arbitrary.</li>
<li>That is, it’s arbitrary <em>unless</em> it’s specific to your function – <code>type = 1</code> corresponds to the empirical quantile, and this would be fine if your function is <em>designed</em> to calculate the empirical quantile.</li>
</ul></li>
</ul>
<p>Adding additional arguments sometimes means you’ll have to think outside of the box as to how you’ll design your function, but that’s the fun part.</p>
<ul>
<li>At least three of the below are relevant/appropriate, and therefore found in your function (if not, your function may be too simple):
<ul>
<li>Appropriate <code>NA</code> handling, such as with <code>na.rm</code>, if relevant (usually relevant for <em>summarising</em> functions that would appear in <code>dplyr::summarise()</code> – typically not in vectorized functions that would appear in <code>dplyr::mutate()</code>).</li>
<li>Appropriate defaults are used, if relevant. (Your justification is considered here).</li>
<li>The ellipsis (<code>...</code>) is used as an “argument”, if relevant/appropriate.</li>
<li>A “special option” is included, to tweak the function’s behaviour. For example, the <code>trim</code> argument in the <code>mean()</code> function, or <code>type</code> in the <code>quantile()</code> function. Including this doesn’t count if this argument should be absorbed by the ellipsis (can’t double-dip the use of ellipsis and this option)</li>
<li>A second special option is included.</li>
</ul></li>
</ul>
<p><strong>Format</strong></p>
<p>What we’re looking for in terms of the <strong>format</strong> of the input and output:</p>
<ul>
<li>Arguments have appropriate names (you should at least have sound justification).</li>
<li>Input should not take a rigid form. An example that’s too rigid is a data frame that’s expected to have special types of columns.<br />
</li>
<li>The output is consistent – for example, always gives a list. An example of inconsistent output: <code>sapply(1:3, seq_len)</code> gives a list, and <code>sapply(1:3, sqrt)</code> gives an (atomic) vector.</li>
<li>The structure of the input and output makes sense. Sometimes the input and output is a natural choice (as in the <code>sqrt()</code> function), and other times it’s not (as in the <code>lm()</code> function).</li>
<li>You’ve made use of data masking when it makes sense to do so, and used curly-curly (<code>{{ var }}</code>) in your function code.</li>
</ul>
<hr />
<!----------- Documentation goes here ---------------------->
<p><strong>Description</strong></p>
<p>FILL_THIS_IN</p>
<p><strong>Input (Arguments)</strong></p>
<ul>
<li><code>FILL_IN_ARGUMENT_NAME</code>: FILL_IN_WITH_DESCRIPTION
<ul>
<li><em>Justification</em>: FILL_THIS_IN</li>
</ul></li>
<li>…</li>
</ul>
<p><strong>Output</strong></p>
<p>FILL_THIS_IN</p>
<!---------------------------------------------------------->
<hr />
</div>
<div id="write-the-function-3" class="section level3">
<h3>1.2 Write the Function (3)</h3>
<table>
<colgroup>
<col width="32%" />
<col width="41%" />
<col width="25%" />
</colgroup>
<thead>
<tr class="header">
<th>Rubric</th>
<th>Description</th>
<th>Points</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Accuracy</td>
<td>Does your function do what you intended it to do, as per your documentation?</td>
<td>2</td>
</tr>
<tr class="even">
<td>Messages</td>
<td>Are your messages well-placed in the function, and informative?</td>
<td>1</td>
</tr>
</tbody>
</table>
<ul class="task-list">
<li><input type="checkbox" disabled="" />
Write your function in the space below, in a code chunk.</li>
<li><input type="checkbox" disabled="" />
Implement at least one of these two message-bearing methods, using conditionals (<code>if</code> statements) to do so:<ul>
<li>Add useful error messages or warnings: use the <code>stop()</code> or <code>warning()</code> function in an <code>if</code> statement. Ensure the message is informative. In one or two brief sentences: Why did you choose what you chose – i.e., warning or stop?</li>
<li>Add a <code>verbose</code> argument (counts as a “special argument” in 1.2), taking a logical input, that keeps the user up-to-date with messages that print to screen as the function is running. This is mostly relevant for functions that could take a long time to run, but for this assignment, it’s OK for any multi-line function.</li>
</ul></li>
</ul>
<!------------ Write your function below here -------------->
<!---------------------------------------------------------->
</div>
<div id="test-the-function-2-points" class="section level3">
<h3>1.3 Test the Function (2 points)</h3>
<table>
<colgroup>
<col width="27%" />
<col width="44%" />
<col width="27%" />
</colgroup>
<thead>
<tr class="header">
<th>Rubric</th>
<th>Description</th>
<th>Points</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Choice</td>
<td>Your demonstrations aren’t redundant; neither are the tests; selected inputs are useful to check</td>
<td>2</td>
</tr>
</tbody>
</table>
<ul class="task-list">
<li><input type="checkbox" disabled="" />
Demonstrate the use of your function, using at least two non-redundant inputs.</li>
<li><input type="checkbox" disabled="" />
Write formal tests for your function. You should use at least three non-redundant uses of an <code>expect_()</code> function from the <code>testthat</code> package, and they should be contained in a <code>test_that()</code> function (or more than one).</li>
</ul>
<p>Example of non-redundant inputs:</p>
<ul>
<li>Vector with no NA’s</li>
<li>Vector that has NA’s</li>
<li>Vector of a different type (if relevant)</li>
<li>Vector of length 0, like <code>numeric(0)</code>.</li>
</ul>
<p>Example of redundant inputs:</p>
<ul>
<li>Each providing a different number (unless one of these numbers have some significance, like a limit point – just tell us if that’s the case)</li>
</ul>
<!------------ Test your function below here --------------->
<!---------------------------------------------------------->
</div>
</div>
